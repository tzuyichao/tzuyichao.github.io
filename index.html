<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Expert Beginner">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Expert Beginner">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Terence Chao">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-TW'
  };
</script>

  <title>Expert Beginner</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Expert Beginner</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/02/jc-cookbook-introduce-attribute/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Terence Chao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Expert Beginner">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/02/jc-cookbook-introduce-attribute/" class="post-title-link" itemprop="url">Javac (JC) Cookbook - How to introduce new attribute into exist class</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-09-02 23:50:40" itemprop="dateCreated datePublished" datetime="2020-09-02T23:50:40+08:00">2020-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-09-03 14:48:14" itemprop="dateModified" datetime="2020-09-03T14:48:14+08:00">2020-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><p>對已經存在的類別加入新的attribute</p>
<h3 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h3><p>作法是透過<code>TreeMaker#VerDef()</code>來產生新的variable的定義，然後透過<code>JCClassDecl</code>的<code>defs#prepend()</code>加到類別的Class Tree上。</p>
<p>以下是使用<code>TreeMaker#VerDef()</code>產生<code>serialVersionUID</code>的定義和初始化。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> JCTree.<span class="function">JCVariableDecl <span class="title">genSerialVersionUIDVariable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    JCTree.JCModifiers modifiers = treeMaker.Modifiers(PRIVATE + STATIC + FINAL);</span><br><span class="line">    Name id = names.fromString(<span class="string">&quot;serialVersionUID&quot;</span>);</span><br><span class="line">    JCTree.JCExpression varType = treeMaker.Type(<span class="keyword">new</span> Type.JCPrimitiveType(TypeTag.LONG, <span class="keyword">null</span>));</span><br><span class="line">    JCTree.JCExpression init = treeMaker.Literal(<span class="number">1L</span>);</span><br><span class="line">    <span class="keyword">return</span> treeMaker.VarDef(modifiers, id, varType, init);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下是把VariableTree加到ClassTree的寫法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jcClassDecl.defs = jcClassDecl.defs.prepend(genSerialVersionUIDVariable());</span><br></pre></td></tr></table></figure>

<p>這個VariableTree對應的java程式碼如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/02/jc-cookbook-invoke-constructor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Terence Chao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Expert Beginner">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/02/jc-cookbook-invoke-constructor/" class="post-title-link" itemprop="url">Javac (JC) Cookbook - How to create instance via invoke default constructor</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-09-02 09:46:09" itemprop="dateCreated datePublished" datetime="2020-09-02T09:46:09+08:00">2020-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-09-03 09:10:40" itemprop="dateModified" datetime="2020-09-03T09:10:40+08:00">2020-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>lombok除了JSR 269之外的黑科技。簡單來說lombok是透過Java 6推出的JSR 269 (Pluggable Annotation Processing API)和修改AST這兩個東西，讓我們寫程式更輕鬆。</p>
<p><code>JCTree</code>就是讓我們可以處理Java AST的API。兩件事要先講，首先根據<code>JCTree</code>的JavaDoc寫類別名稱看到JC是javac的縮寫。接著，這些API是internal使用，有可能改變或刪除，如果要用後果自行負責。</p>
<blockquote>
<p>This is NOT part of any supported API. If you write code that depends on this, you do so at your own risk. This code and its internal interfaces are subject to change or deletion without notice.</p>
</blockquote>
<h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><p>如何透過JCTree API增加一個呼叫default constructor產生物件?</p>
<h3 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h3><p>透過<code>TreeMaker#NewClass()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> JCNewClass <span class="title">NewClass</span><span class="params">(JCExpression encl,</span></span></span><br><span class="line"><span class="function"><span class="params">                         List&lt;JCExpression&gt; typeargs,</span></span></span><br><span class="line"><span class="function"><span class="params">                         JCExpression clazz,</span></span></span><br><span class="line"><span class="function"><span class="params">                         List&lt;JCExpression&gt; args,</span></span></span><br><span class="line"><span class="function"><span class="params">                         JCClassDecl def)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SpeculativeNewClass(encl, typeargs, clazz, args, def, <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>JCTree</code>可以看到<code>JCNewClass</code>類別。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A new(...) operation.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">JCNewClass</span> <span class="keyword">extends</span> <span class="title">JCPolyExpression</span> <span class="keyword">implements</span> <span class="title">NewClassTree</span> </span>&#123;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>下面是一個簡單的例子，透過呼叫<code>StringBuilder</code>的default constructor產生一個<code>StringBuilder</code>，後續使用<code>StringBuilder#append(str: String)</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">JCTree.JCExpression varType = query(<span class="string">&quot;java&quot;</span>, <span class="string">&quot;lang&quot;</span>, <span class="string">&quot;StringBuilder&quot;</span>);</span><br><span class="line"></span><br><span class="line">Name result = names.fromString(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">JCTree.JCModifiers resultModifiers = treeMaker.Modifiers(Flags.PARAMETER);</span><br><span class="line"></span><br><span class="line">JCTree.JCNewClass stringBuilderClass = treeMaker.NewClass(<span class="keyword">null</span>,</span><br><span class="line">        com.sun.tools.javac.util.List.nil(),</span><br><span class="line">        varType,</span><br><span class="line">        com.sun.tools.javac.util.List.nil(),</span><br><span class="line">        <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">JCTree.JCVariableDecl resultIdent = treeMaker.VarDef(resultModifiers, result, varType, stringBuilderClass);</span><br></pre></td></tr></table></figure>

<p>對應產生的Java code就是</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br></pre></td></tr></table></figure>

<h3 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h3><h4 id="Anonymous-class-以Runnable為例"><a href="#Anonymous-class-以Runnable為例" class="headerlink" title="Anonymous class: 以Runnable為例"></a>Anonymous class: 以Runnable為例</h4><p>舉例來說，我們希望在AST裡加上如下列的內容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Runnable r = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>就會使用到<code>TreeMaker#NewClass()</code>的第五個參數。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">JCTree.JCExpression runnableType = query(<span class="string">&quot;java&quot;</span>, <span class="string">&quot;lang&quot;</span>, <span class="string">&quot;Runnable&quot;</span>);</span><br><span class="line"></span><br><span class="line">Name runnable = names.fromString(<span class="string">&quot;r&quot;</span>);</span><br><span class="line">JCTree.JCModifiers rModifiers = treeMaker.Modifiers(Flags.PARAMETER);</span><br><span class="line">ListBuffer&lt;JCTree.JCStatement&gt; runStatements = <span class="keyword">new</span> ListBuffer&lt;&gt;();</span><br><span class="line">JCTree.JCBlock rBody = treeMaker.Block(<span class="number">0</span>, runStatements.toList());</span><br><span class="line"></span><br><span class="line">JCTree.JCMethodDecl runMethod = treeMaker.MethodDef(</span><br><span class="line">        treeMaker.Modifiers(PUBLIC),</span><br><span class="line">        names.fromString(<span class="string">&quot;run&quot;</span>),</span><br><span class="line">        treeMaker.Type(<span class="keyword">new</span> Type.JCVoidType()),</span><br><span class="line">        com.sun.tools.javac.util.List.nil(),</span><br><span class="line">        com.sun.tools.javac.util.List.nil(),</span><br><span class="line">        com.sun.tools.javac.util.List.nil(),</span><br><span class="line">        rBody,</span><br><span class="line">        <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">List&lt;JCTree&gt; defs = List.of(runMethod);</span><br><span class="line"></span><br><span class="line">JCTree.JCClassDecl classDecl = treeMaker.AnonymousClassDef(treeMaker.Modifiers(PARAMETER),</span><br><span class="line">        defs);</span><br><span class="line"></span><br><span class="line">JCTree.JCNewClass rClass = treeMaker.NewClass(<span class="keyword">null</span>,</span><br><span class="line">        com.sun.tools.javac.util.List.nil(),</span><br><span class="line">        runnableType,</span><br><span class="line">        com.sun.tools.javac.util.List.nil(),</span><br><span class="line">        classDecl);</span><br><span class="line"></span><br><span class="line">JCTree.JCVariableDecl rIdent = treeMaker.VarDef(rModifiers, runnable, runnableType, rClass);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/25/java-method-overloading-extra-story/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Terence Chao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Expert Beginner">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/25/java-method-overloading-extra-story/" class="post-title-link" itemprop="url">Java Method Overloading Extra Story</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-08-25 16:36:40" itemprop="dateCreated datePublished" datetime="2020-08-25T16:36:40+08:00">2020-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-09-02 10:09:01" itemprop="dateModified" datetime="2020-09-02T10:09:01+08:00">2020-09-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>很久沒寫東西，其實我不知道面試問這個的意義。是要考倒求職者彰顯自己的能力?還是甚麼目的?<br>真的面試到Java那麼熟的碼農，大多數台灣企業做的東西用的上這些知識又有幾間? 公司又能花多少錢養這種工程師，但大多數時間只需要寫CRUD，稍微進階點的東西要做當官的就龜縮? XD</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Method-Overloading"><a href="#Method-Overloading" class="headerlink" title="Method Overloading"></a>Method Overloading</h3><p>Java 101教我們的Method Overloading機制允許我們在一個Java class裡可以有多個相同method name的methods，但argument list必須不一樣。</p>
<p>也就是說如果只有return type不一樣就不行，試著寫下列程式在compile(通常IDE就會給你紅色波浪)的時候就會發生錯誤。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMethodOverload</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在Terminal編譯的話會看到下列的錯誤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PS D:\tmp&gt; javac .\TestMethodOverload.java</span><br><span class="line">.\TestMethodOverload.java:6: error: method test() is already defined in class TestMethodOverload</span><br><span class="line">    public int test() &#123;</span><br><span class="line">               ^</span><br><span class="line">1 error</span><br></pre></td></tr></table></figure>

<h3 id="Extra-Story"><a href="#Extra-Story" class="headerlink" title="Extra Story"></a>Extra Story</h3><p>問題來了，如果同一個類別裡，有兩個同名的方法，argument list一樣，只有回傳型態不一樣，在JVM是合法的嗎?</p>
<p>答案是【是合法的】，JVM是允許有這樣的情況，method overloading這樣的規定是Java語言的規範，所以是java compiler會抱怨你這樣寫，但是如果你能產生這種情況的bytecode class，JVM是不在乎的。</p>
<p>證明下面這個例子，用BCEL產生一個簡單的Java Class，HelloJVM類別裡面有兩個test1()只有return type的差異，一個回int一個回double。然後順便弄個main method讓我們可已執行一下這兩個test1()。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> String ClassName = <span class="string">&quot;HelloJVM&quot;</span>;</span><br><span class="line">ClassGen classGen = <span class="keyword">new</span> ClassGen(ClassName,</span><br><span class="line">        <span class="string">&quot;java.lang.Object&quot;</span>,</span><br><span class="line">        <span class="string">&quot;&lt;generated&gt;&quot;</span>,</span><br><span class="line">        Constants.ACC_PUBLIC | Constants.ACC_SUPER,</span><br><span class="line">        <span class="keyword">null</span>);</span><br><span class="line">ConstantPoolGen constantPoolGen = classGen.getConstantPool();</span><br><span class="line">InstructionList instructionList = <span class="keyword">new</span> InstructionList();</span><br><span class="line">InstructionFactory instructionFactory = <span class="keyword">new</span> InstructionFactory(classGen);</span><br><span class="line"></span><br><span class="line">MethodGen test1MethodGen = <span class="keyword">new</span> MethodGen(Constants.ACC_PUBLIC,</span><br><span class="line">        Type.INT,</span><br><span class="line">        Type.NO_ARGS,</span><br><span class="line">        <span class="keyword">null</span>,</span><br><span class="line">        <span class="string">&quot;test1&quot;</span>,</span><br><span class="line">        ClassName,</span><br><span class="line">        instructionList,</span><br><span class="line">        constantPoolGen);</span><br><span class="line">instructionList.append(<span class="keyword">new</span> PUSH(constantPoolGen, <span class="number">5</span>));</span><br><span class="line">instructionList.append(InstructionFactory.createReturn(Type.INT));</span><br><span class="line"></span><br><span class="line">test1MethodGen.setMaxLocals();</span><br><span class="line">test1MethodGen.setMaxStack();</span><br><span class="line">classGen.addMethod(test1MethodGen.getMethod());</span><br><span class="line">instructionList.dispose();</span><br><span class="line"></span><br><span class="line">MethodGen test2MethodGen = <span class="keyword">new</span> MethodGen(Constants.ACC_PUBLIC,</span><br><span class="line">        Type.DOUBLE,</span><br><span class="line">        Type.NO_ARGS,</span><br><span class="line">        <span class="keyword">null</span>,</span><br><span class="line">        <span class="string">&quot;test1&quot;</span>,</span><br><span class="line">        ClassName,</span><br><span class="line">        instructionList,</span><br><span class="line">        constantPoolGen);</span><br><span class="line">instructionList.append(<span class="keyword">new</span> PUSH(constantPoolGen, <span class="number">10.112</span>));</span><br><span class="line">instructionList.append(InstructionFactory.createReturn(Type.DOUBLE));</span><br><span class="line"></span><br><span class="line">test2MethodGen.setMaxLocals();</span><br><span class="line">test2MethodGen.setMaxStack();</span><br><span class="line">classGen.addMethod(test2MethodGen.getMethod());</span><br><span class="line">instructionList.dispose();</span><br><span class="line"></span><br><span class="line">MethodGen mainMethodGen = <span class="keyword">new</span> MethodGen(Constants.ACC_PUBLIC | Constants.ACC_STATIC,</span><br><span class="line">        Type.VOID,</span><br><span class="line">        <span class="keyword">new</span> Type[] &#123;</span><br><span class="line">                <span class="keyword">new</span> ArrayType(Type.STRING, <span class="number">1</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">new</span> String[] &#123;<span class="string">&quot;argv&quot;</span>&#125;,</span><br><span class="line">        <span class="string">&quot;main&quot;</span>,</span><br><span class="line">        ClassName,</span><br><span class="line">        instructionList,</span><br><span class="line">        constantPoolGen);</span><br><span class="line">ObjectType p_stream = <span class="keyword">new</span> ObjectType(<span class="string">&quot;java.io.PrintStream&quot;</span>);</span><br><span class="line"></span><br><span class="line">instructionList.append(instructionFactory.createNew(ClassName));</span><br><span class="line">instructionList.append(InstructionFactory.createDup(<span class="number">1</span>));</span><br><span class="line">instructionList.append(instructionFactory.createInvoke(ClassName,</span><br><span class="line">        <span class="string">&quot;&lt;init&gt;&quot;</span>,</span><br><span class="line">        Type.VOID,</span><br><span class="line">        <span class="keyword">new</span> Type[] &#123;&#125;,</span><br><span class="line">        (<span class="keyword">short</span>) Constants.INVOKESPECIAL));</span><br><span class="line">instructionList.append(InstructionFactory.createStore(Type.OBJECT, <span class="number">1</span>));</span><br><span class="line">instructionList.append(instructionFactory.createFieldAccess(<span class="string">&quot;java.lang.System&quot;</span>,</span><br><span class="line">        <span class="string">&quot;out&quot;</span>,</span><br><span class="line">        p_stream,</span><br><span class="line">        (<span class="keyword">short</span>) Constants.GETSTATIC));</span><br><span class="line">instructionList.append(InstructionFactory.createLoad(Type.OBJECT, <span class="number">1</span>));</span><br><span class="line">instructionList.append(instructionFactory.createInvoke(ClassName,</span><br><span class="line">        <span class="string">&quot;test1&quot;</span>,</span><br><span class="line">        Type.INT,</span><br><span class="line">        Type.NO_ARGS,</span><br><span class="line">        (<span class="keyword">short</span>) Constants.INVOKEVIRTUAL));</span><br><span class="line">instructionList.append(instructionFactory.createInvoke(<span class="string">&quot;java.io.PrintStream&quot;</span>,</span><br><span class="line">        <span class="string">&quot;println&quot;</span>,</span><br><span class="line">        Type.VOID,</span><br><span class="line">        <span class="keyword">new</span> Type[] &#123;Type.INT&#125;,</span><br><span class="line">        (<span class="keyword">short</span>) Constants.INVOKEVIRTUAL));</span><br><span class="line">instructionList.append(instructionFactory.createFieldAccess(<span class="string">&quot;java.lang.System&quot;</span>,</span><br><span class="line">        <span class="string">&quot;out&quot;</span>,</span><br><span class="line">        p_stream,</span><br><span class="line">        (<span class="keyword">short</span>) Constants.GETSTATIC));</span><br><span class="line">instructionList.append(InstructionFactory.createLoad(Type.OBJECT, <span class="number">1</span>));</span><br><span class="line">instructionList.append(instructionFactory.createInvoke(ClassName,</span><br><span class="line">        <span class="string">&quot;test1&quot;</span>,</span><br><span class="line">        Type.DOUBLE,</span><br><span class="line">        Type.NO_ARGS,</span><br><span class="line">        (<span class="keyword">short</span>) Constants.INVOKEVIRTUAL));</span><br><span class="line">instructionList.append(instructionFactory.createInvoke(<span class="string">&quot;java.io.PrintStream&quot;</span>,</span><br><span class="line">        <span class="string">&quot;println&quot;</span>,</span><br><span class="line">        Type.VOID,</span><br><span class="line">        <span class="keyword">new</span> Type[] &#123;Type.DOUBLE&#125;,</span><br><span class="line">        (<span class="keyword">short</span>) Constants.INVOKEVIRTUAL));</span><br><span class="line"></span><br><span class="line">instructionList.append(InstructionFactory.createReturn(Type.VOID));</span><br><span class="line"></span><br><span class="line">mainMethodGen.setMaxStack();</span><br><span class="line">mainMethodGen.setMaxLocals();</span><br><span class="line">classGen.addMethod(mainMethodGen.getMethod());</span><br><span class="line"></span><br><span class="line">instructionList.dispose();</span><br><span class="line"></span><br><span class="line">classGen.addEmptyConstructor(Constants.ACC_PUBLIC);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    classGen.getJavaClass().dump(<span class="string">&quot;HelloJVM.class&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/tzuyichao/java-basic/blob/master/java-basic/src/main/java/bcel/Test1BCEL.java">完整程式碼</a>，接下來是來執行一下產生的HelloJVM class，順便用javap看一下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">D:\lab\java-basic\java-basic&gt;java HelloJVM</span><br><span class="line">5</span><br><span class="line">10.112</span><br><span class="line"></span><br><span class="line">D:\lab\java-basic\java-basic&gt;javap HelloJVM.class</span><br><span class="line">Compiled from &quot;&lt;generated&gt;&quot;</span><br><span class="line">public class HelloJVM &#123;</span><br><span class="line">  public int test1();</span><br><span class="line">  public double test1();</span><br><span class="line">  public static void main(java.lang.String[]);</span><br><span class="line">  public HelloJVM();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/25/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Terence Chao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Expert Beginner">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/25/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-08-25 13:28:53" itemprop="dateCreated datePublished" datetime="2020-08-25T13:28:53+08:00">2020-08-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Terence Chao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">標籤</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Terence Chao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
